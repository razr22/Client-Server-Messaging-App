/*
 * @authors: Zain Quraishi, Sundar Manku 
 * @date: April 13th, 2018
 * @filename: WSThread.java
 * @description: Processes Web Server socket input, and parses input for http messages.
 */

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
//import java.io.OutputStream;
import java.net.Socket;

public class ServerThread extends Thread {
	protected Socket socket;
	
    public ServerThread(Socket clientSocket) {
        this.socket = clientSocket;
    }
    
    //main thread runs on web server processing input
    public void run() {
    	System.out.println("Client Connected...");

    	//Try/catch to retrieve socket input
        try {
        	
        	//get socket input
            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            
            //initialize output stream to write to socket
            //OutputStream os = socket.getOutputStream();
            //http = new SendHTTPMessage(os);
            
           
            String str = ".";
            String request = "";
            
            //read incoming data from socket
            while (!in.readLine().isEmpty()){
                str = in.readLine();
                request += str + "\n";
                
                System.out.println("Zain");
              }

            System.out.println("Zain");
            
            //parse input for http request
            //parseHTTP(request);
            
          //  os.close();
            socket.close();
            
        } catch (IOException e) {
            e.printStackTrace();
        }
        
    }    
}
